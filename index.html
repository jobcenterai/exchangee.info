<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pro Crypto Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family: 'Roboto', sans-serif; }
  body { background-color:#1E2A38; color:#fff; transition: background 0.3s, color 0.3s; }
  header { background:#1B2530; padding:20px; text-align:center; }
  header h1 { color:#69A3F3; }
  nav { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:10px; }
  nav button { background:#273746; color:#69A3F3; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; font-weight:500; }
  nav button:hover { background:#34495e; }
  main { max-width:1400px; margin:30px auto; padding:0 20px; }
  section { margin-top:30px; }
  section h2 { cursor:pointer; display:flex; justify-content:space-between; align-items:center; color:#69A3F3; }
  .content { display:none; margin-top:20px; }
  .crypto-table { width:100%; border-collapse:collapse; }
  .crypto-table th, .crypto-table td { padding:12px 15px; text-align:left; cursor:pointer; }
  .crypto-table th { background:#2C3E50; color:#69A3F3; }
  .crypto-table tr:nth-child(even){ background:#1F2B38; }
  .crypto-table tr:hover{ background:#273746; }
  .search-box { margin-bottom:15px; text-align:center; }
  .search-box input { padding:10px 15px; width:300px; border-radius:8px; border:none; outline:none; font-size:16px; }
  .contact a { display:inline-block; margin:0 15px; color:#69A3F3; text-decoration:none; font-weight:500; }
  .contact a:hover { text-decoration:underline; }
  #chartContainer { max-width:800px; margin:20px auto; }
  .theme-toggle { position:absolute; top:20px; right:20px; background:#273746; color:#69A3F3; border:none; padding:10px 15px; border-radius:6px; cursor:pointer; }
  @media(max-width:768px){ .crypto-table th, .crypto-table td{ padding:10px; font-size:14px; } .search-box input{ width:90%; } nav{ flex-direction:column; } }
</style>
</head>
<body>

<button class="theme-toggle">Toggle Theme</button>

<header>
  <h1>Pro Crypto Dashboard</h1>
  <nav>
    <button data-target="cryptos">Cryptos</button>
    <button data-target="portfolio">Portfolio</button>
    <button data-target="charts">Charts</button>
    <button data-target="contact">Contact</button>
  </nav>
</header>

<main>
  <!-- CRYPTOS -->
  <section id="cryptos">
    <h2>Cryptocurrencies ▼</h2>
    <div class="content">
      <div class="search-box">
        <input type="text" id="search" placeholder="Search coins (BTC, ETH...)">
      </div>
      <table class="crypto-table" id="crypto-table">
        <thead>
          <tr>
            <th data-key="market_cap_rank">Rank</th>
            <th data-key="name">Name</th>
            <th data-key="current_price">Price</th>
            <th data-key="price_change_percentage_24h">24h Change</th>
            <th data-key="market_cap">Market Cap</th>
          </tr>
        </thead>
        <tbody id="crypto-data"></tbody>
      </table>
    </div>
  </section>

  <!-- PORTFOLIO -->
  <section id="portfolio">
    <h2>Portfolio ▼</h2>
    <div class="content">
      <p style="text-align:center; color:#ccc;">Enter holdings coming soon...</p>
    </div>
  </section>

  <!-- CHARTS -->
  <section id="charts">
    <h2>Charts ▼</h2>
    <div class="content">
      <div id="chartContainer">
        <canvas id="cryptoChart"></canvas>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <h2>Contact ▼</h2>
    <div class="content contact">
      <a href="mailto:youremail@example.com">Email</a>
      <a href="https://discord.com/users/yourdiscordid" target="_blank">Discord</a>
      <a href="https://github.com/yourgithub" target="_blank">GitHub</a>
    </div>
  </section>
</main>

<script>
const apiURL = "https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false";
let cryptoList = [];

// COLLAPSIBLE SECTIONS
document.querySelectorAll("section h2").forEach(h => {
  h.addEventListener("click", () => {
    const content = h.nextElementSibling;
    document.querySelectorAll(".content").forEach(c => c.style.display="none");
    content.style.display = content.style.display === "block" ? "none" : "block";
  });
});

// NAV BUTTONS
document.querySelectorAll("nav button").forEach(btn => {
  btn.addEventListener("click", () => {
    const target = btn.dataset.target;
    document.getElementById(target).scrollIntoView({behavior:"smooth"});
    document.querySelectorAll(".content").forEach(c=>c.style.display="none");
    document.querySelector(`#${target} .content`).style.display="block";
  });
});

// FETCH CRYPTO DATA
async function fetchCryptoData(){
  const res = await fetch(apiURL);
  cryptoList = await res.json();
  displayCryptos(cryptoList);
  updateChart(cryptoList[0].id);
}

// DISPLAY CRYPTOS
function displayCryptos(data){
  const tbody = document.getElementById("crypto-data");
  tbody.innerHTML="";
  data.forEach(coin=>{
    const tr = document.createElement("tr");
    tr.innerHTML=`
      <td>${coin.market_cap_rank}</td>
      <td>${coin.name} (${coin.symbol.toUpperCase()})</td>
      <td>$${coin.current_price.toLocaleString()}</td>
      <td style="color:${coin.price_change_percentage_24h>=0?'#2ecc71':'#e74c3c'}">${coin.price_change_percentage_24h?.toFixed(2)}%</td>
      <td>$${coin.market_cap.toLocaleString()}</td>
    `;
    tr.addEventListener("click", ()=>updateChart(coin.id));
    tbody.appendChild(tr);
  });
}

// SEARCH FILTER
document.getElementById("search").addEventListener("input",(e)=>{
  const query=e.target.value.toLowerCase();
  displayCryptos(cryptoList.filter(c=>c.name.toLowerCase().includes(query) || c.symbol.toLowerCase().includes(query)));
});

// SORTABLE TABLE
document.querySelectorAll(".crypto-table th").forEach(th=>{
  th.addEventListener("click", ()=>{
    const key=th.dataset.key;
    const sorted=[...cryptoList].sort((a,b)=>typeof a[key]==="string"?a[key].localeCompare(b[key]):a[key]-b[key]);
    displayCryptos(sorted);
  });
});

// CHART.JS
let chart;
async function updateChart(coinId){
  const res = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&days=7`);
  const data = await res.json();
  const labels = data.prices.map(p=>new Date(p[0]).toLocaleDateString());
  const prices = data.prices.map(p=>p[1]);

  if(chart) chart.destroy();
  const ctx = document.getElementById("cryptoChart").getContext("2d");
  chart = new Chart(ctx,{
    type:"line",
    data:{ labels, datasets:[{ label:`${coinId.toUpperCase()} Price`, data:prices, borderColor:"#69A3F3", backgroundColor:"rgba(105,163,243,0.2)"}] },
    options:{ responsive:true, scales:{ x:{ display:true }, y:{ display:true } } }
  });
}

// THEME TOGGLE
document.querySelector(".theme-toggle").addEventListener("click",()=>{
  document.body.style.background = document.body.style.background==="#fff"? "#1E2A38" : "#fff";
  document.body.style.color = document.body.style.color==="#000"? "#fff":"#000";
});

fetchCryptoData();
setInterval(fetchCryptoData,60000);
</script>

</body>
</html>
