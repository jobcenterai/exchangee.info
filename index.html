<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Crypto Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Roboto', sans-serif; }
    body { background-color: #1E2A38; color: #ffffff; }

    header { background-color: #1B2530; padding: 20px; text-align: center; }
    header h1 { color: #69A3F3; font-weight: 700; }
    nav { margin-top: 10px; }
    nav a { color: #69A3F3; margin: 0 10px; text-decoration: none; font-weight: 500; }
    nav a:hover { text-decoration: underline; }

    main { max-width: 1400px; margin: 30px auto; padding: 0 20px; }

    .search-box { margin-top: 20px; text-align: center; }
    .search-box input { padding: 10px 15px; width: 300px; border-radius: 8px; border: none; outline: none; font-size: 16px; }

    .crypto-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .crypto-table th, .crypto-table td { padding: 12px 15px; text-align: left; }
    .crypto-table th { background-color: #2C3E50; color: #69A3F3; }
    .crypto-table tr:nth-child(even) { background-color: #1F2B38; }
    .crypto-table tr:hover { background-color: #273746; }

    .contact { margin-top: 50px; text-align: center; }
    .contact a { display: inline-block; margin: 0 15px; color: #69A3F3; text-decoration: none; font-weight: 500; }
    .contact a:hover { text-decoration: underline; }

    @media(max-width:768px){
      .crypto-table th, .crypto-table td { padding: 10px; font-size: 14px; }
      .search-box input { width: 90%; }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <h1>Advanced Crypto Tracker</h1>
    <nav>
      <a href="#cryptos">Cryptos</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <main>
    <section id="cryptos">
      <h2 style="color:#69A3F3;">Cryptocurrency Prices</h2>

      <div class="search-box">
        <input type="text" id="search" placeholder="Search for a cryptocurrency (BTC, LTC, ETH...)">
      </div>

      <table class="crypto-table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Price</th>
            <th>24h Change</th>
            <th>Market Cap</th>
          </tr>
        </thead>
        <tbody id="crypto-data"></tbody>
      </table>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="contact">
      <h2 style="color:#69A3F3;">Contact Me</h2>
      <a href="mailto:youremail@example.com">Email</a>
      <a href="https://discord.com/users/yourdiscordid" target="_blank">Discord</a>
      <a href="https://github.com/yourgithub" target="_blank">GitHub</a>
    </section>
  </main>

  <!-- SCRIPT: Fetch many cryptos and search -->
  <script>
    const apiURL = "https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&sparkline=false";

    let cryptoList = [];

    async function fetchCryptoData() {
      try {
        const res = await fetch(apiURL);
        cryptoList = await res.json();
        displayCryptos(cryptoList);
      } catch (err) {
        console.error("Error fetching crypto data:", err);
      }
    }

    function displayCryptos(data) {
      const tbody = document.getElementById("crypto-data");
      tbody.innerHTML = "";
      data.forEach(coin => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${coin.market_cap_rank}</td>
          <td>${coin.name} (${coin.symbol.toUpperCase()})</td>
          <td>$${coin.current_price.toLocaleString()}</td>
          <td style="color:${coin.price_change_percentage_24h >= 0 ? '#2ecc71' : '#e74c3c'}">
            ${coin.price_change_percentage_24h.toFixed(2)}%
          </td>
          <td>$${coin.market_cap.toLocaleString()}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    // SEARCH FUNCTIONALITY
    const searchInput = document.getElementById("search");
    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      const filtered = cryptoList.filter(coin => 
        coin.name.toLowerCase().includes(query) || coin.symbol.toLowerCase().includes(query)
      );
      displayCryptos(filtered);
    });

    fetchCryptoData();
    setInterval(fetchCryptoData, 60000); // refresh every minute
  </script>

</body>
</html>
