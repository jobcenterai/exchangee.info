<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CryptoTracking Terminal</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}

body{
background:#0f172a;
color:#e2e8f0;
padding:40px 20px;
min-height:100vh;
}

h1{
text-align:center;
font-size:28px;
font-weight:600;
margin-bottom:30px;
color:#f1f5f9;
}

.container{
max-width:1100px;
margin:auto;
background:#111827;
border-radius:12px;
padding:25px;
border:1px solid #1f2937;
}

table{
width:100%;
border-collapse:collapse;
}

th{
text-align:left;
font-size:13px;
text-transform:uppercase;
letter-spacing:0.5px;
color:#94a3b8;
padding:14px;
border-bottom:1px solid #1f2937;
}

td{
padding:16px 14px;
border-bottom:1px solid #1f2937;
font-size:14px;
}

tr:hover{
background:#0b1220;
cursor:pointer;
}

.positive{color:#22c55e;}
.negative{color:#ef4444;}
.neutral{color:#f59e0b;}

.confidence-wrapper{
margin-top:6px;
background:#1e293b;
height:6px;
border-radius:4px;
overflow:hidden;
}

.confidence-fill{
height:100%;
background:#3b82f6;
}

canvas{
height:40px !important;
}

.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,0.7);
justify-content:center;
align-items:center;
}

.modal-content{
background:#111827;
padding:30px;
border-radius:12px;
width:80%;
max-width:900px;
border:1px solid #1f2937;
}

.close{
text-align:right;
cursor:pointer;
color:#ef4444;
margin-bottom:10px;
}

.footer{
margin-top:30px;
text-align:center;
color:#64748b;
font-size:13px;
}
</style>
</head>

<body>

<h1>CryptoTracking Terminal</h1>

<div class="container">
<table id="cryptoTable">
<thead>
<tr>
<th>Asset</th>
<th>Price (€)</th>
<th>24h</th>
<th>AI Signal</th>
<th>Confidence</th>
<th>Trend</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<div class="modal" id="chartModal">
<div class="modal-content">
<div class="close" onclick="closeModal()">Close</div>
<h2 id="modalTitle" style="margin-bottom:20px;"></h2>
<canvas id="modalChart"></canvas>
</div>
</div>

<div class="footer">
Discord | Email | GitHub
</div>

<script>
const assets = [
{ id:"bitcoin", stream:"btcusdt", name:"Bitcoin" },
{ id:"ethereum", stream:"ethusdt", name:"Ethereum" },
{ id:"litecoin", stream:"ltcusdt", name:"Litecoin" },
{ id:"ripple", stream:"xrpusdt", name:"XRP" }
];

let priceData = {};
let historyData = {};
let modalChart;

function formatEUR(n){ return "€" + n.toFixed(2); }

function aiEngine(change){
let confidence = Math.min(Math.abs(change)*10,100).toFixed(0);
let signal="Neutral";
let className="neutral";

if(change>1.5){ signal="Bullish"; className="positive"; }
if(change<-1.5){ signal="Bearish"; className="negative"; }

return {signal,className,confidence};
}

function initTable(){
const tbody=document.querySelector("#cryptoTable tbody");
assets.forEach(a=>{
historyData[a.stream]=[];
tbody.innerHTML+=`
<tr id="row-${a.stream}">
<td>${a.name}</td>
<td id="price-${a.stream}">--</td>
<td id="change-${a.stream}">--</td>
<td id="signal-${a.stream}">--</td>
<td id="confidence-${a.stream}">--</td>
<td><canvas id="chart-${a.stream}"></canvas></td>
</tr>`;
});
}

function startWebSockets(){
assets.forEach(a=>{
const ws=new WebSocket(`wss://stream.binance.com:9443/ws/${a.stream}@trade`);
ws.onmessage=(msg)=>{
let data=JSON.parse(msg.data);
let price=parseFloat(data.p);
priceData[a.stream]=price;
updatePrice(a.stream,price);
};
});
}

function updatePrice(stream,price){
let eur=price*0.92;
document.getElementById("price-"+stream).innerText=formatEUR(eur);

historyData[stream].push(eur);
if(historyData[stream].length>30) historyData[stream].shift();
drawMiniChart(stream);
}

function drawMiniChart(stream){
new Chart(document.getElementById("chart-"+stream),{
type:"line",
data:{labels:historyData[stream],datasets:[{
data:historyData[stream],
borderColor:"#3b82f6",
borderWidth:2,
pointRadius:0,
tension:0.3
}]},
options:{plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:false}}}
});
}

async function recalcAI(){
const res=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=eur&ids=bitcoin,ethereum,litecoin,ripple");
const data=await res.json();

const map={bitcoin:"btcusdt",ethereum:"ethusdt",litecoin:"ltcusdt",ripple:"xrpusdt"};

data.forEach(c=>{
let change=c.price_change_percentage_24h;
let ai=aiEngine(change);
let stream=map[c.id];

document.getElementById("change-"+stream).innerText=change.toFixed(2)+"%";
document.getElementById("change-"+stream).className=change>=0?"positive":"negative";
document.getElementById("signal-"+stream).innerText=ai.signal;
document.getElementById("signal-"+stream).className=ai.className;

document.getElementById("confidence-"+stream).innerHTML=
ai.confidence+"%"+
"<div class='confidence-wrapper'><div class='confidence-fill' style='width:"+ai.confidence+"%'></div></div>";
});
}

function closeModal(){
document.getElementById("chartModal").style.display="none";
}

initTable();
startWebSockets();
recalcAI();
setInterval(recalcAI,60000);
</script>

</body>
</html>
